package vine.gameplay.component;

import vine.graphics.Sprite;
import vine.graphics.Texture2D;

/**
 * @author Steffen
 *
 */
public class StaticSprite extends Component implements Sprite{ // NOSONAR

    private Texture2D texture;
    private float[] vertices;
    private float[] textureUVs;
    private float[] textureUVs2;

    private float time = 0;

    /**
     * @return The vertices array of the sprite.
     */
    @Override
    public final float[] getVertices() {
        return vertices.clone();
    }

    /**
     * @return
     */
    @Override
    public final float[] getUVCoordinates() {
        return time < 250 ? textureUVs.clone() : textureUVs2.clone();
    }


    @Override
    public int[] getIndices() {
        // TODO Auto-generated method stub
        return null;
    }
    
    public void addTime(float time) {
        this.time += time;
        this.time = this.time % 500;
    }

    @Override
    public void update(float delta) {
        addTime(delta);
    }

    /**
     * @param worldWidth
     * @param worldHeight
     * @param texture
     * @param texX
     * @param texY
     * @param texWidth
     * @param texHeight
     */
    public void construct(final int worldWidth, final int worldHeight, final Texture2D texture, final int texX,
            final int texY, final int texWidth, final int texHeight) {
        vertices = new float[] { 0, 0, 0, 0, worldHeight, 0, worldWidth, worldHeight, 0, worldWidth, 0, 0, };
        this.texture = texture;
        final int textureWidth = texture.getWidth();
        final int textureHeight = texture.getHeight();
        final float uvX = texX / (float) textureWidth;
        final float uvY = texY / (float) textureHeight;
        final float uvWidth = texWidth / (float) textureWidth;
        final float uvHeight = texHeight / (float) textureHeight;
        textureUVs = new float[] { uvX, uvY + uvHeight, uvX, uvY, uvX + uvWidth, uvY, uvX + uvWidth, uvY + uvHeight };
        final float uvX2 = (6 * 16) / (float) textureWidth;
        final float uvY2 = 32 / (float) textureHeight;
        textureUVs2 = new float[] { uvX2, uvY2 + uvHeight, uvX2, uvY2, uvX2 + uvWidth, uvY2, uvX2 + uvWidth, uvY2 + uvHeight };
    }

    /**
     * @return
     */
    public Texture2D getTexture() {
        return texture;
    }
}
