package vine.platform.lwjgl3;

import static org.lwjgl.glfw.GLFW.glfwPollEvents;
import static org.lwjgl.glfw.GLFW.glfwSetKeyCallback;

import org.lwjgl.glfw.GLFW;
import org.lwjgl.glfw.GLFWCursorPosCallback;
import org.lwjgl.glfw.GLFWKeyCallback;
import org.lwjgl.glfw.GLFWMouseButtonCallback;
import org.lwjgl.glfw.GLFWScrollCallback;
import org.lwjgl.glfw.GLFWCharCallback;
import org.lwjgl.glfw.GLFWCharModsCallback;

import vine.input.EventMapper;
import vine.input.Input;
import vine.math.Vector2f;

public class GLFWInput implements Input {

    private long context;
    private GLFWKeyCallback keyCallback;
    GLFWCursorPosCallback cursorPosCallback;
    GLFWMouseButtonCallback mouseButtonCallback;
    GLFWScrollCallback scrollCallback;
    GLFWCharCallback charCallback;
    GLFWCharModsCallback charModsCallback;

    @Override
    public void pollEvents() {
        glfwPollEvents();
    }

    @Override
    public void setKeyCallback(KeyCallback callback) {
        if (keyCallback != null) {
            keyCallback.release();
        }
        keyCallback = GLFWKeyCallback
                .create((win, key, scancode, action, mods) -> callback.keyPressed(win, key, scancode, action, mods));
        glfwSetKeyCallback(context, keyCallback);
    }

    @Override
    public void startListenToWindow(long context) {
        this.context = context;
    }

    @Override
    public boolean isReleaseAction(int action) {
        return action != GLFW.GLFW_RELEASE;
    }

    @Override
    public void setScrollCallback(ScrollCallback callback) {
        // TODO Auto-generated method stub

    }

    @Override
    public void setCharCallback(CharCallback callback) {
        // TODO Auto-generated method stub

    }

    @Override
    public void setCharModCallback(CharModCallback callback) {
        // TODO Auto-generated method stub

    }

    @Override
    public void setCursorPositionCallback(CursorPositionCallback callback) {
        // TODO Auto-generated method stub

    }

    @Override
    public void setMouseButtonCallback(MouseButtonCallback callback) {
        // TODO Auto-generated method stub

    }

    @Override
    public Vector2f getCursorPosition() {
        // TODO Auto-generated method stub
        return null;
    }
}
