package vine.animation;

import java.util.HashMap;
import java.util.Map;

import vine.graphics.Sprite;

public class AnimationStateManager {
    private final Map<String, AnimationState> states;
    private AnimationState currentState;
    private float time;

    public AnimationStateManager(AnimationState[] animation) {
        states = new HashMap<>();
        for (AnimationState state : animation) {
            if (currentState == null) {
                currentState = state;
            }
            states.put(state.getName(), state);
        }
    }

    public void changeState(String name) {
        currentState = states.get(name);
    }

    public void update(float delta) {
        this.time += delta;
        this.time = time % currentState.getClip().getDuration();
    }

    public float[] getCurrentFrame() {
        return currentState.getClip().getFrame(time).getUvs();
    }

    public AnimationState getCurrentState() {
        return currentState;
    }
}
